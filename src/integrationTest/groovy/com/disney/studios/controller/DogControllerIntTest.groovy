package com.disney.studios.controller

import org.junit.*
import org.junit.runner.*

import org.springframework.boot.test.context.web.*
import org.springframework.boot.test.web.client.*
import org.springframework.test.context.junit4.*

import org.springframework.boot.test.context.SpringBootTest
import org.springframework.boot.test.context.SpringBootTest.WebEnvironment
import org.springframework.beans.factory.annotation.Autowired

import static org.assertj.core.api.Assertions.*

@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT)
public class DogControllerIntTest {

    @Autowired
    private TestRestTemplate restTemplate

    @Test
    public void testListofDogs() {
        String body = this.restTemplate.getForObject("/dogs/list", String.class);
        //assertThat(body).isEqualTo("Hello My Dear!");
        def expected ="""[{"name":"Labrador","dogs":[{"id":1,"pictureUrl":"http://i.imgur.com/eE29vX4.png","votes":0,"breedName":"Labrador"},{"id":2,"pictureUrl":"http://i.imgur.com/xX2AeDR.png","votes":0,"breedName":"Labrador"},{"id":3,"pictureUrl":"http://i.imgur.com/hBFRUuW.png","votes":0,"breedName":"Labrador"},{"id":4,"pictureUrl":"http://i.imgur.com/WDWK4nF.png","votes":0,"breedName":"Labrador"},{"id":5,"pictureUrl":"http://i.imgur.com/zxtD5Zw.png","votes":0,"breedName":"Labrador"},{"id":6,"pictureUrl":"http://i.imgur.com/MrkAGKR.png","votes":0,"breedName":"Labrador"},{"id":7,"pictureUrl":"http://i.imgur.com/o3Nyw4R.png","votes":0,"breedName":"Labrador"},{"id":8,"pictureUrl":"http://i.imgur.com/SzP5370.png","votes":0,"breedName":"Labrador"},{"id":9,"pictureUrl":"http://i.imgur.com/oHaP6I3.png","votes":0,"breedName":"Labrador"},{"id":10,"pictureUrl":"http://i.imgur.com/kSU7Zca.png","votes":0,"breedName":"Labrador"},{"id":11,"pictureUrl":"http://i.imgur.com/SAJJ1oH.png","votes":0,"breedName":"Labrador"},{"id":12,"pictureUrl":"http://i.imgur.com/BYvRbs8.png","votes":0,"breedName":"Labrador"},{"id":13,"pictureUrl":"http://i.imgur.com/VzFTsGg.png","votes":0,"breedName":"Labrador"},{"id":14,"pictureUrl":"http://i.imgur.com/qigJZWa.png","votes":0,"breedName":"Labrador"},{"id":15,"pictureUrl":"http://i.imgur.com/gskym.png","votes":0,"breedName":"Labrador"}]},{"name":"Pug","dogs":[{"id":16,"pictureUrl":"http://i.imgur.com/ozJD7SC.png","votes":0,"breedName":"Pug"},{"id":17,"pictureUrl":"http://i.imgur.com/E5vBM5Z.png","votes":0,"breedName":"Pug"},{"id":18,"pictureUrl":"http://i.imgur.com/miiP4NI.png","votes":0,"breedName":"Pug"},{"id":19,"pictureUrl":"http://i.imgur.com/GCE8dj5.png","votes":0,"breedName":"Pug"},{"id":20,"pictureUrl":"http://i.imgur.com/NGG3Yir.png","votes":0,"breedName":"Pug"},{"id":21,"pictureUrl":"http://i.imgur.com/q53cfRy.png","votes":0,"breedName":"Pug"},{"id":22,"pictureUrl":"http://i.imgur.com/Flic3TB.png","votes":0,"breedName":"Pug"},{"id":23,"pictureUrl":"http://i.imgur.com/zjgtrf9.png","votes":0,"breedName":"Pug"},{"id":24,"pictureUrl":"http://i.imgur.com/Mda3xXr.png","votes":0,"breedName":"Pug"},{"id":25,"pictureUrl":"http://i.imgur.com/IOh5mgB.png","votes":0,"breedName":"Pug"},{"id":26,"pictureUrl":"http://i.imgur.com/Fl2ivvG.png","votes":0,"breedName":"Pug"},{"id":27,"pictureUrl":"http://i.imgur.com/iLzWvSY.png","votes":0,"breedName":"Pug"},{"id":28,"pictureUrl":"http://i.imgur.com/RQKBN3F.png","votes":0,"breedName":"Pug"},{"id":29,"pictureUrl":"http://i.imgur.com/8c3RpI0.png","votes":0,"breedName":"Pug"},{"id":30,"pictureUrl":"http://i.imgur.com/7ysJzS4.png","votes":0,"breedName":"Pug"},{"id":31,"pictureUrl":"http://i.imgur.com/uccGfLn.png","votes":0,"breedName":"Pug"},{"id":32,"pictureUrl":"http://i.imgur.com/HrscSnK.png","votes":0,"breedName":"Pug"},{"id":33,"pictureUrl":"http://i.imgur.com/tUZhJYN.png","votes":0,"breedName":"Pug"},{"id":34,"pictureUrl":"http://i.imgur.com/xAGJ0Ry.png","votes":0,"breedName":"Pug"},{"id":35,"pictureUrl":"http://i.imgur.com/YxSvzWm.png","votes":0,"breedName":"Pug"},{"id":36,"pictureUrl":"http://i.imgur.com/Y32LWO6.png","votes":0,"breedName":"Pug"},{"id":37,"pictureUrl":"http://i.imgur.com/umJXx6S.png","votes":0,"breedName":"Pug"},{"id":38,"pictureUrl":"http://i.imgur.com/R8Ju76x.png","votes":0,"breedName":"Pug"},{"id":39,"pictureUrl":"http://i.imgur.com/xTg9j70.png","votes":0,"breedName":"Pug"},{"id":40,"pictureUrl":"http://i.imgur.com/zUnR5lj.png","votes":0,"breedName":"Pug"},{"id":41,"pictureUrl":"http://i.imgur.com/RUjOi8t.png","votes":0,"breedName":"Pug"},{"id":42,"pictureUrl":"http://i.imgur.com/Dd1K1uR.png","votes":0,"breedName":"Pug"},{"id":43,"pictureUrl":"http://i.imgur.com/Q5uksG8.png","votes":0,"breedName":"Pug"},{"id":44,"pictureUrl":"http://i.imgur.com/7YxiavD.png","votes":0,"breedName":"Pug"},{"id":45,"pictureUrl":"http://i.imgur.com/8B3HOrS.png","votes":0,"breedName":"Pug"},{"id":46,"pictureUrl":"http://i.imgur.com/9YfjSxU.png","votes":0,"breedName":"Pug"},{"id":47,"pictureUrl":"http://i.imgur.com/NSCW1Rz.png","votes":0,"breedName":"Pug"},{"id":48,"pictureUrl":"http://i.imgur.com/ZwM4KY4.png","votes":0,"breedName":"Pug"},{"id":49,"pictureUrl":"http://i.imgur.com/uy9pY3Y.png","votes":0,"breedName":"Pug"},{"id":50,"pictureUrl":"http://i.imgur.com/ZFk0cgV.png","votes":0,"breedName":"Pug"},{"id":51,"pictureUrl":"http://i.imgur.com/6Fz5JOg.png","votes":0,"breedName":"Pug"},{"id":52,"pictureUrl":"http://i.imgur.com/mNQbxWo.png","votes":0,"breedName":"Pug"},{"id":53,"pictureUrl":"http://i.imgur.com/C1MFoB0.png","votes":0,"breedName":"Pug"},{"id":54,"pictureUrl":"http://i.imgur.com/Rdbawjx.png","votes":0,"breedName":"Pug"}]},{"name":"Retriever","dogs":[{"id":55,"pictureUrl":"http://i.imgur.com/wR38uBx.png","votes":0,"breedName":"Retriever"},{"id":56,"pictureUrl":"http://i.imgur.com/CHRlo0W.png","votes":0,"breedName":"Retriever"},{"id":57,"pictureUrl":"http://i.imgur.com/tXnch1O.png","votes":0,"breedName":"Retriever"},{"id":58,"pictureUrl":"http://i.imgur.com/VCgfaB2.png","votes":0,"breedName":"Retriever"},{"id":59,"pictureUrl":"http://i.imgur.com/Ror46i4.png","votes":0,"breedName":"Retriever"},{"id":60,"pictureUrl":"http://i.imgur.com/Ful5PwH.png","votes":0,"breedName":"Retriever"},{"id":61,"pictureUrl":"http://i.imgur.com/C4rrJdn.png","votes":0,"breedName":"Retriever"},{"id":62,"pictureUrl":"http://i.imgur.com/Ao9bR9A.png","votes":0,"breedName":"Retriever"},{"id":63,"pictureUrl":"http://i.imgur.com/R14AU0I.png","votes":0,"breedName":"Retriever"},{"id":64,"pictureUrl":"http://i.imgur.com/gpH8wIV.png","votes":0,"breedName":"Retriever"},{"id":65,"pictureUrl":"http://i.imgur.com/luPxoig.png","votes":0,"breedName":"Retriever"},{"id":66,"pictureUrl":"http://i.imgur.com/MiIDyfD.png","votes":0,"breedName":"Retriever"},{"id":67,"pictureUrl":"http://i.imgur.com/4qmmRFj.png","votes":0,"breedName":"Retriever"},{"id":68,"pictureUrl":"http://i.imgur.com/ZSzHQ2q.png","votes":0,"breedName":"Retriever"},{"id":69,"pictureUrl":"http://i.imgur.com/PoA6rLg.png","votes":0,"breedName":"Retriever"},{"id":70,"pictureUrl":"http://i.imgur.com/NYwynk3.png","votes":0,"breedName":"Retriever"},{"id":71,"pictureUrl":"http://i.imgur.com/ni8vK0U.png","votes":0,"breedName":"Retriever"},{"id":72,"pictureUrl":"http://i.imgur.com/NinMpda.png","votes":0,"breedName":"Retriever"},{"id":73,"pictureUrl":"http://i.imgur.com/4L8rMko.png","votes":0,"breedName":"Retriever"},{"id":74,"pictureUrl":"http://i.imgur.com/HoISzqN.png","votes":0,"breedName":"Retriever"},{"id":75,"pictureUrl":"http://i.imgur.com/FPISssi.png","votes":0,"breedName":"Retriever"},{"id":76,"pictureUrl":"http://i.imgur.com/SzP5370.png","votes":0,"breedName":"Retriever"},{"id":77,"pictureUrl":"http://i.imgur.com/oHaP6I3.png","votes":0,"breedName":"Retriever"},{"id":78,"pictureUrl":"http://i.imgur.com/wlVWJpY.png","votes":0,"breedName":"Retriever"},{"id":79,"pictureUrl":"http://i.imgur.com/rV4COi2.png","votes":0,"breedName":"Retriever"},{"id":80,"pictureUrl":"http://i.imgur.com/6WZFhJX.png","votes":0,"breedName":"Retriever"},{"id":81,"pictureUrl":"http://i.imgur.com/gFLzkPt.png","votes":0,"breedName":"Retriever"},{"id":82,"pictureUrl":"http://i.imgur.com/ULSe4AI.png","votes":0,"breedName":"Retriever"},{"id":83,"pictureUrl":"http://i.imgur.com/yDEa2a5.png","votes":0,"breedName":"Retriever"},{"id":84,"pictureUrl":"http://i.imgur.com/BYvRbs8.png","votes":0,"breedName":"Retriever"},{"id":85,"pictureUrl":"http://i.imgur.com/VzFTsGg.png","votes":0,"breedName":"Retriever"},{"id":86,"pictureUrl":"http://i.imgur.com/BnhbY54.png","votes":0,"breedName":"Retriever"},{"id":87,"pictureUrl":"http://i.imgur.com/ToYsMEC.png","votes":0,"breedName":"Retriever"}]},{"name":"Yorkie","dogs":[{"id":88,"pictureUrl":"http://i.imgur.com/oSieVUO.png","votes":0,"breedName":"Yorkie"},{"id":89,"pictureUrl":"http://i.imgur.com/qtXIL.png","votes":0,"breedName":"Yorkie"},{"id":90,"pictureUrl":"http://i.imgur.com/qWLKy8a.jpg","votes":0,"breedName":"Yorkie"}]}]"""

        assertThat(body).isEqualTo(expected)
    }

    @Test
    public void testListOfDogsByBreed() {
        String body = this.restTemplate.getForObject("/dogs/list/{breed}", String.class, "Labrador");
        def expected = """[{"id":1,"pictureUrl":"http://i.imgur.com/eE29vX4.png","votes":0,"breedName":"Labrador"},{"id":2,"pictureUrl":"http://i.imgur.com/xX2AeDR.png","votes":0,"breedName":"Labrador"},{"id":3,"pictureUrl":"http://i.imgur.com/hBFRUuW.png","votes":0,"breedName":"Labrador"},{"id":4,"pictureUrl":"http://i.imgur.com/WDWK4nF.png","votes":0,"breedName":"Labrador"},{"id":5,"pictureUrl":"http://i.imgur.com/zxtD5Zw.png","votes":0,"breedName":"Labrador"},{"id":6,"pictureUrl":"http://i.imgur.com/MrkAGKR.png","votes":0,"breedName":"Labrador"},{"id":7,"pictureUrl":"http://i.imgur.com/o3Nyw4R.png","votes":0,"breedName":"Labrador"},{"id":8,"pictureUrl":"http://i.imgur.com/SzP5370.png","votes":0,"breedName":"Labrador"},{"id":9,"pictureUrl":"http://i.imgur.com/oHaP6I3.png","votes":0,"breedName":"Labrador"},{"id":10,"pictureUrl":"http://i.imgur.com/kSU7Zca.png","votes":0,"breedName":"Labrador"},{"id":11,"pictureUrl":"http://i.imgur.com/SAJJ1oH.png","votes":0,"breedName":"Labrador"},{"id":12,"pictureUrl":"http://i.imgur.com/BYvRbs8.png","votes":0,"breedName":"Labrador"},{"id":13,"pictureUrl":"http://i.imgur.com/VzFTsGg.png","votes":0,"breedName":"Labrador"},{"id":14,"pictureUrl":"http://i.imgur.com/qigJZWa.png","votes":0,"breedName":"Labrador"},{"id":15,"pictureUrl":"http://i.imgur.com/gskym.png","votes":0,"breedName":"Labrador"}]"""

        assertThat(body).isEqualTo(expected)
    }

    @Test
    public void testDogInformation() {
        String body = this.restTemplate.getForObject("/dogs/{id}", String.class, "1");
        def expected = """{"id":1,"pictureUrl":"http://i.imgur.com/eE29vX4.png","votes":0,"breedName":"Labrador"}"""

        assertThat(body).isEqualTo(expected)
    }
}
